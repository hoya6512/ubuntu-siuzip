<!-- Modal -->
{% load static %}

{% for memo in memo_list %}
    <div class="modal fade" id="MemoModal{{ memo.pk }}" tabindex="-1" aria-labelledby="MemoModalLabel{{ memo.pk }}" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="MemoModalLabel{{ memo.pk }}">
              {% if memo.due_date|timeuntil == '0분' %}
                  <span class="align-self-center" style="color: red"><i class="fa-solid fa-calendar-days"></i> {{ memo.due_date | date:'n월 j일' }}</span><span class="small align-self-center"  style="color: red">까지</span>
              {% else %}
                  <span class="align-self-center"><i class="fa-solid fa-calendar-days"></i> {{ memo.due_date | date:'n월 j일' }}</span><span class="small text-secondary align-self-center">까지</span>
              {% endif %}
            </h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <h3>{{ memo.title }}</h3>
              {{ memo.content|safe }}

              <div class="row border-top">
                  <div class="col-6 d-flex mt-3">
                      <img
                      class="img-fluid rounded-circle me-1"
                      {% if memo.author.profile.avatar %}
                        src="{{ memo.author.profile.avatar.url }}"
                      {% else %}
                        src="{% static 'image/guest_avatar(32px).png' %}"
                      {% endif %}
                      style="width: 3em; height: 3em"
                      alt="{{ memo.author.nick_name }}'s avatar"/>
                      <div class="align-content-center">
                          <p class="mx-2 mb-0">{{ memo.author.nick_name }}</p>
                          <p class="mx-2 mb-0 text-secondary" style="font-size: small">{{ memo.created_at|timesince }} 전</p>
                      </div>
                  </div>

                  <div class="col-6 text-end align-content-end">
                         <a
                            role="button"
                            class="btn btn-outline-danger"
                            href="{% url "memo:memo_like" memo.pk %}"
                            style="font-weight: 600">
                              {% if request.user in memo.like_users.all %}
                              <i class="fa-solid fa-heart" style="color:red"></i>
                              {{ memo.like_users.count }}
                              {% else %}
                              <i class="fa-regular fa-heart" style="color:red"></i>
                              {{ memo.like_users.count }}
                              {% endif %}
                        </a>
                  </div>
              </div>

          </div>
          <div class="modal-footer">

              {% if request.user != memo.author %}
                  <span class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" data-bs-title="작성자만 수정이 가능합니다.">
                    <button class="btn btn-outline-primary shadow-sm p-1" type="button" disabled><i class="fa-solid fa-pen"></i> 수정</button>
                  </span>
                  <span class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" data-bs-title="작성자만 삭제가 가능합니다.">
                    <button class="btn btn-outline-secondary shadow-sm p-1" type="button" disabled><i class="fa-solid fa-trash"></i> 삭제</button>
                  </span>
              {% else %}
                  <button class="btn btn-outline-primary shadow-sm p-1"
                      role="button"
                      onclick="location.href='{% url "memo:memo_edit" memo.pk %}'"
                  >
                      <i class="fa-solid fa-pen"></i> 수정
                  </button>
                  <button class="memo-delete btn btn-outline-secondary shadow-sm p-1" role="button"
                          href="javascript:void(0)"
                          data-uri="{% url "memo:memo_delete" memo.pk %}"
                  >
                      <i class="fa-solid fa-trash"></i> 삭제
                  </button>
              {% endif %}
          </div>
        </div>
      </div>
    </div>
{% endfor %}
